{% comment %}
  Inline photo gallery for blog posts.
  
  Usage in a post:
  
  {% include post-gallery.html
    cdn="https://photos.digitalden.cloud/gallery/montenegro-2026"
    photos="montenegro-gallery-1.jpg|Caption,montenegro-gallery-2.jpg|Caption"
  %}
{% endcomment %}

<style>
  .post-gallery { columns: 3; column-gap: 8px; margin: 2rem 0; }
  .post-gallery .gallery-item { break-inside: avoid; margin-bottom: 8px; border-radius: 6px; overflow: hidden; cursor: pointer; transition: opacity 0.3s ease; }
  .post-gallery .gallery-item:hover { opacity: 0.85; }
  .post-gallery .gallery-item img { width: 100%; display: block; }

  @media (max-width: 576px) {
    .post-gallery { columns: 2; column-gap: 6px; }
    .post-gallery .gallery-item { margin-bottom: 6px; }
  }
</style>

{% assign photo_list = include.photos | split: ',' %}

<div class="post-gallery">
  {% for photo_entry in photo_list %}
    {% assign parts = photo_entry | split: '|' %}
    {% assign filename = parts[0] | strip %}
    {% assign caption = parts[1] | strip %}
    <div class="gallery-item">
      <a href="{{ include.cdn }}/full/{{ filename }}" class="popup img-link">
        <img src="{{ include.cdn }}/thumbs/{{ filename }}" alt="{{ caption | default: 'Photo' }}" loading="lazy">
      </a>
    </div>
  {% endfor %}
</div>
