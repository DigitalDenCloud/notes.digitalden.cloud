---
layout: page
refactor: true
---

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.css">

<style>
  .album-header {
    margin-bottom: 2rem;
  }

  .album-header p {
    margin: 0;
    opacity: 0.7;
    font-size: 0.95rem;
  }

  .album-header .album-meta {
    display: flex;
    gap: 1.5rem;
    margin-top: 0.5rem;
    font-size: 0.85rem;
    opacity: 0.6;
  }

  /* ═══════════════════════════════════════════════════════
     LAYOUT MODE: Currently using GRID (even rows of 3)
     Good for: all landscape or all same aspect ratio photos
     
     To switch to MASONRY (Pinterest-style staggered layout):
     1. Comment out the GRID section below
     2. Uncomment the MASONRY section below it
     ═══════════════════════════════════════════════════════ */

  /* ── GRID (active) ── */
  .masonry-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
  }

  .masonry-grid .gallery-item {
    border-radius: 8px;
    overflow: hidden;
    cursor: pointer;
    transition: opacity 0.3s ease;
  }

  .masonry-grid .gallery-item:hover {
    opacity: 0.85;
  }

  .masonry-grid .gallery-item img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
    pointer-events: none;
  }

  /* ── MASONRY (inactive — uncomment to use) ──
  .masonry-grid {
    columns: 3;
    column-gap: 10px;
  }

  .masonry-grid .gallery-item {
    break-inside: avoid;
    margin-bottom: 10px;
    border-radius: 8px;
    overflow: hidden;
    cursor: pointer;
    transition: opacity 0.3s ease;
  }

  .masonry-grid .gallery-item:hover {
    opacity: 0.85;
  }

  .masonry-grid .gallery-item img {
    width: 100%;
    height: auto;
    display: block;
    pointer-events: none;
  }
  ── end MASONRY ── */

  /* Prevent Chirpy from wrapping these images */
  .masonry-grid .gallery-item a.popup,
  .masonry-grid .gallery-item a.img-link {
    display: contents !important;
    pointer-events: none !important;
  }

  @media (max-width: 992px) {
    .masonry-grid {
      /* GRID mode */
      grid-template-columns: repeat(2, 1fr);
      /* MASONRY mode: uncomment below, comment above */
      /* columns: 2; */
    }
  }

  @media (max-width: 576px) {
    .masonry-grid {
      /* GRID mode */
      grid-template-columns: repeat(2, 1fr);
      gap: 6px;
      /* MASONRY mode: uncomment below, comment above */
      /* columns: 2; column-gap: 6px; */
    }
    .masonry-grid .gallery-item {
      border-radius: 4px;
      /* MASONRY mode: uncomment below */
      /* margin-bottom: 6px; */
    }
  }
</style>

<div class="album-header">
  {% if page.description %}
    <p>{{ page.description }}</p>
  {% endif %}
  <div class="album-meta">
    {% if page.date_range %}<span>{{ page.date_range }}</span>{% endif %}
    {% if page.camera %}<span>{{ page.camera }}</span>{% endif %}
    {% if page.photo_count %}<span>{{ page.photo_count }} photos</span>{% endif %}
  </div>
  {% if page.blog_post %}
    <p style="margin-top: 0.8rem;">
      <a href="{{ page.blog_post }}">Read the blog post →</a>
    </p>
  {% endif %}
</div>

<div class="masonry-grid" id="album-grid">
  {% for photo in page.photos %}
    <div class="gallery-item"
         data-full="{{ page.cdn_base }}/full/{{ photo.file }}"
         data-caption="{{ photo.caption }}">
      <img
        src="{{ page.cdn_base }}/thumbs/{{ photo.file }}"
        alt="{{ photo.caption | default: page.title }}"
        loading="lazy"
      >
    </div>
  {% endfor %}
</div>

{{ content }}

<script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.umd.js"></script>
<script>
  (function() {
    var container = document.getElementById('album-grid');
    if (!container) return;

    var items = container.querySelectorAll('.gallery-item');
    var albumData = [];

    items.forEach(function(item, i) {
      albumData.push({
        src: item.getAttribute('data-full'),
        type: 'image'
      });

      item.addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation();
        Fancybox.show(albumData, {
          startIndex: i,
          Toolbar: {
            display: {
              left: [],
              middle: [],
              right: ["close"],
            },
          },
          Thumbs: false,
          Slideshow: false,
          Images: {
            zoom: false,
          },
        });
      });
    });
  })();
</script>